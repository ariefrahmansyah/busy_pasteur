name: "Create cluster using KinD"
on: [pull_request, push]
jobs:
  kind:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master

    - name: Setup cluster
      run: |
        ./setup_cluster.sh

    - name: Test KFServing installation
      run: |
        sleep 30
        kubectl create namespace kfserving-test
        kubectl apply -f sklearn.yaml -n kfserving-test

        sleep 180

        kubectl describe all -n kfserving-test
